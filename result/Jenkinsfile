pipeline {
	agent any

	tools {
		nodejs 'NodeJS 8.9'
	}
	
	stages {
		stage('build'){
			when {
				changeset '**/result/**'
			}
			dir('result'){
				steps {
					sh 'npm install'
				}
			}
		}

		stage('test'){
			when {
				changeset '**/result/**'
			}
			dir('result'){
				steps {
                	sh 'npm install'
                	sh 'npm run test'
            	}
			}
		}
	}
} 
